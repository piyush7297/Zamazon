<app-header></app-header>
<div class="container-fluid mt-4">
  <div class="container">
    <div class="row pb-5 mb-4 gy-4 pt-5">
      <section *ngIf="cartProducts.length>0; else empty">
        <div class="col-12 text-center d-flex  gap-2 justify-content-center align-items-center mb-3 header-main-text  "><i class="fa-solid fa-cart-shopping fs-4 "></i><h2 class="p-0 m-0">Your Cart</h2></div>
        <div
        class="col-12 d-flex
        flex-sm-column flex-lg-row flex-md-row flex-column gap-2  mb-4  p-2 pb-5"
        routerLink="/productdetail/{{cart.id}}"
        *ngFor="let cart of cartProducts "
        >
          <div class="col-lg-9 col-md-9 col-sm-12 col-12 d-flex align-items-center position-relative gap-lg-0 gap-md-0 gap-sm-1 gap-2" role="button">
          <div class="col-4 ">
            <img class="product-img" src="{{ cart.image }}"   alt="" />
            <div
              class="d-flex w-50 pt-2  gap-4 fw-bold text-center"
            >
              <mat-icon
                role="button"
                class=""
                (click)="sub($event , cart)"
              >
          remove
              </mat-icon>
              <p role="button" class="m-0">{{cart.quantity}}</p>
              <mat-icon
                role="button"
                class=""
                (click)="add($event , cart)"
              >
                add
              </mat-icon>
            </div>
          </div>
          <div class="col-lg-8 col-md-8 col-sm-7 col-7" >
            <h3 class="fs-3 mb-2 text-truncate">{{ cart.name }}</h3>
            <p class="text-truncate">{{ cart.description }}</p>
            <h4 class="btn-text fw-bold">${{ cart.price }}</h4>
            <!-- <button class="active rounded-2 p-2" (click)="removeItem(cart)">Remove</button> -->
          <div class="d-flex justify-content-end position-absolute bottom-0 end-0">
            <button  mat-raised-button class="btn-bg" (click)="removeItem($event , cart.id)">Remove</button>
          </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-3 col-sm-12 col-12  border-secondary p-4 bg-secondary bg-opacity-10 rounded-2">
          <h4>Price Details</h4>
          <hr class="text-dark fw-bold" />
          <div class="d-flex justify-content-between flex-lg-column flex-md-column flex-sm-row flex-row">
            <div class="d-flex justify-content-between">
              <span>Price({{cart.quantity}} Item)</span>
              <span>${{cart.totalPrice}}</span>
            </div>
            <div class="d-flex justify-content-between">
              <span>Delivery Charges</span>
              <span>$5</span>
            </div>
          </div>
          <hr class="mt-4">
          <div class="d-flex justify-content-between mt-lg-5 mt-md-5 mt-sm-2 mt-2">
            <span>Total Payable Amount</span>
            <span>${{cart.totalPrice + 5}}</span>
          </div>
        </div>
      </div>
    </section>
    <div class="fixed-bottom bg-light">
      <app-cartfooter [grandTotal]="grandTotal" (emptyCart)="emptyCart()"></app-cartfooter>
    </div>
      <ng-template #empty>
        <h2 class="text-center pt-5 header-main-text">Your Cart Is Empty!</h2>
          <div class="col-lg-2 col-md-5 col-sm-6 col-6 cartheight mx-auto m-0 text-center">
            <img class="w-100" src="https://cdn-icons-png.freepik.com/512/11329/11329060.png?ga=GA1.1.936263871.1713358307" alt="">
          </div>
      </ng-template>
    </div>
  </div>
</div>
